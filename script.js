// --- æ¯æ—¥çŸ­å¥å…§å®¹ (å·²ä¿®æ­£é€—è™ŸéŒ¯èª¤) ---
const dailyContent = [
    { title: "Day 1 ğŸ’¡", text: "æƒ³èµ·ä»Šå¹´è®“ä½ å¿ƒå‹•çš„ä¸€å€‹ç¬é–“ï¼Œé‚£å€‹æ„Ÿå—èƒŒå¾Œçš„éœ€è¦æ˜¯ä»€éº¼ï¼Ÿè¢«ç†è§£ã€è¢«æ¥ä½ã€è¢«çœ‹è¦‹ï¼Œé‚„æ˜¯å®‰ç©©ï¼Ÿ" },
    { title: "Day 2 ğŸ’–", text: "ç•¶ä½ åœä¸‹è…³æ­¥æ™‚ï¼Œä½ æœ€å®³æ€•çš„æ˜¯ä»€éº¼ï¼Ÿä½ é¡˜æ„è½è½é‚£è‚¡å®³æ€•èƒŒå¾ŒçœŸæ­£æƒ³å®ˆè­·çš„æ±è¥¿å—ï¼Ÿ" },
    { title: "Day 3 ğŸ’¡", text: "æœ€è¿‘è®“ä½ æœ€ç„¦æ…®çš„äº‹ï¼Œå…¶å¯¦åœ¨æé†’ä½ ï¼šæœ‰å“ªå€‹åƒ¹å€¼æ­£åœ¨è¢«è¸©åˆ°ï¼Ÿå‹‡æ•¢è½è¦‹é‚£ä»½èºå‹•ã€‚" },
    { title: "Day 4 ğŸ’¡", text: "ä¸€å¹´å¾Œçš„ä½ ï¼Œæœƒæƒ³æ„Ÿè¬ç¾åœ¨çš„å“ªå€‹é¸æ“‡ï¼Ÿé‚£å€‹ç­”æ¡ˆå…¶å¯¦æ­£åœ¨æŒ‡å¼•ä½ å‘å“ªè£¡èµ°ã€‚" },
    { title: "Day 5 ğŸ’–", text: "ä½ æ›¾åœ¨å“ªäº›æ™‚å€™ã€é•èƒŒè‡ªå·±ã€å»è¿åˆä¸–ç•Œï¼Ÿä»Šå¤©å˜—è©¦åšä¸€ä»¶è®“å…§åœ¨å°é½Šçš„äº‹ï¼Œå“ªæ€•å¾®å°ã€‚" },
    { title: "Day 6 ğŸ’¡", text: "æ‹–å»¶çš„èƒŒå¾Œé€šå¸¸æ˜¯å®³æ€•ã€‚ä»Šå¤©å•å•çœ‹ï¼šæˆ‘æ€•çš„æ˜¯å¤±æ•—ã€è©•åƒ¹ã€é‚„æ˜¯å¤±å»æŒæ§ï¼Ÿ" },
    { title: "Day 7 ğŸ’¡", text: "ä½ çš„æ³¨æ„åŠ›æ­£é€éœ²ä½ æœ€åœ¨æ„çš„äº‹ã€‚ä»Šå¤©çš„ä½ ï¼ŒæŠŠå¿ƒåŠ›æ”¾åœ¨çœŸå¿ƒé¸æ“‡ï¼Œé‚„æ˜¯ç¿’æ…£æ€§æ‡‰ä»˜ï¼Ÿ" },
    { title: "Day 8 ğŸ’–", text: "å¦‚æœèƒ½å›é ­æ“æŠ±ä¸€å¹´å‰çš„è‡ªå·±ï¼Œä½ æœ€æƒ³å®‰æ’«çš„æ˜¯å“ªä¸€ç¨®æ„Ÿå—ï¼Ÿé‚£ä¹Ÿæ˜¯ä½ ç¾åœ¨ä»éœ€è¦çš„æº«æŸ”ã€‚" },
    { title: "Day 9 ğŸ’¡", text: "ä½ ä¸å¿…æ¯ä¸€åˆ»éƒ½è¡¨ç¾å¾—æœ‰æ–¹å‘ã€‚æœ‰äº›ç©ºç™½ï¼Œæ˜¯åœ¨é‚€è«‹ä½ è½è¦‹è‡ªå·±çš„å¿ƒè²ã€‚" },
    { title: "Day 10 ğŸ’¡", text: "æ··äº‚ä¸¦ä¸ä»£è¡¨å¤±æ•—ï¼Œè€Œæ˜¯æé†’ä½ ï¼šæœ‰äº›èˆŠæ–¹å¼ä¸å†é©åˆä½ ã€‚æ”¾ä¸‹ä¸æ˜¯æ”¾æ£„ï¼Œè€Œæ˜¯çµ¦è‡ªå·±ç©ºé–“ã€‚" },
    { title: "Day 11 ğŸ’–", text: "ä½ é€å‡ºçš„æ¯ä¸€ä»½å–„æ„ï¼Œéƒ½åœ¨å·å·ä¿®å¾©ä½ è‡ªå·±ã€‚é‚£äº›æŸ”è»Ÿä¸æ˜¯è„†å¼±ï¼Œè€Œæ˜¯ä¸€ç¨®åŠ›é‡ã€‚" },
    { title: "Day 12 ğŸ’¡", text: "ä½ å®³æ€•çš„ä¸æ˜¯ç©ºç™½ï¼Œè€Œæ˜¯ç©ºç™½æœƒé€¼ä½ é¢å°ä»€éº¼ï¼Ÿé‚£å€‹ç­”æ¡ˆèƒ½å¸¶ä½ çœ‹è¦‹çœŸå¯¦çš„è‡ªå·±ã€‚" }, 
    { title: "Day 13 ğŸ˜‚", text: "æˆ‘ä¸æ˜¯æ²’æœ‰ç›®æ¨™ï¼Œæˆ‘çš„ç›®æ¨™æ˜¯ï¼šè®“æˆ‘åœ¨åºŠä¸Šèººè‘—æ™‚ï¼Œæ²’æœ‰ä»»ä½•ç½ªæƒ¡æ„Ÿã€‚è‹¥ä»Šå¤©èƒ½å¤šç›¸ä¿¡è‡ªå·±ä¸€é»ï¼Œèººè‘—ä¹Ÿç®—å‰é€²ã€‚" },
    { title: "Day 14 âœ¨", text: "ä½ çš„å­˜åœ¨æœ¬èº«ï¼Œå°±æ˜¯å®‡å®™è´ˆäºˆä¸–é–“æœ€ç¨ç‰¹çš„ç¦®ç‰©ã€‚ä½ æ‰€é€£çµçš„æ¯ä¸€å€‹éˆé­‚ï¼Œéƒ½å› ä½ çš„å…‰èŠ’è€Œæœ‰äº†æ›´æ·±å±¤çš„æ„ç¾©èˆ‡æº«æš–ã€‚" },
    { title: "Day 15 ğŸ’–", text: "ä½ ç¾åœ¨æœ€æƒ³æ”¾ä¸‹çš„ä¸€ä»¶äº‹èƒŒå¾Œï¼Œå…¶å¯¦è—è‘—ä¸€å€‹èˆŠç—›ã€‚ç•¶ä½ é¡˜æ„çœ‹è¦‹å®ƒï¼Œä½ å°±çœŸæ­£é–‹å§‹è‡ªç”±ã€‚" },
    { title: "Day 16 ğŸ’¡", text: "æ¯ä¸€æ¬¡å¡ä½ï¼Œéƒ½å•å•è‡ªå·±ï¼šé€™æ˜¯è‡ªå·±çš„é¸æ“‡ï¼Œé‚„æ˜¯ä»¥ç‚ºå¿…é ˆçš„é¸æ“‡ï¼Ÿåˆ†æ¸…æ¥šä»¥å¾Œï¼Œå°±èƒ½æ‹¿å›è‡ªå·±çš„åŠ›é‡ã€‚" },
    { title: "Day 17 ğŸ’¡", text: "ä½ ä¸éœ€è¦ç­‰å¾…å®Œç¾ï¼Œæ‰å€¼å¾—é–‹å§‹ã€‚äººç”Ÿå¤§éƒ¨åˆ†çš„çªç ´ï¼Œéƒ½åœ¨ä¸å®Œç¾è£¡èª•ç”Ÿã€‚" },
    { title: "Day 18 ğŸ’–", text: "è®“è‡ªå·±é è¿‘é‚£äº›æ‡‚ä½ ã€æ¬£è³ä½ ã€ä¸è¦æ±‚ä½ å½è£çš„äººã€‚ä»–å€‘è®“ä½ æ˜ç™½ï¼šè¢«æ„›ä¸¦ä¸éœ€è¦äº¤æ›æ¢ä»¶ã€‚" },
    { title: "Day 19 ğŸ’¡", text: "å¦‚æœå¯ä»¥ï¼Œä½ æƒ³ä¿ç•™ä»Šå¹´çš„ä¸€å€‹ã€Œç¿’æ…£ã€å¸¶åˆ°æ˜å¹´ã€‚ä»–æ»¿è¶³äº†ä½ å“ªä¸€å€‹éœ€è¦ï¼Ÿ" },
    { title: "Day 20 ğŸ’¡", text: "ä½ æœ€å¸¸é€ƒé¿çš„å¿µé ­ï¼Œæ­£æ˜¯åœ¨å‘¼å–šä½ çš„æˆé•·ã€‚ä»Šå¤©è©¦è‘—ä¸é€ƒï¼Œåªæ˜¯éœéœåœ°é™ªå®ƒå­˜åœ¨ä¸‰ç§’é˜ã€‚" },
    { title: "Day 21 ğŸ’–", text: "ä½ ä»¥ç‚ºçš„éŸŒæ€§ï¼Œå…¶å¯¦æ˜¯ä¸€æ¬¡æ¬¡å¿ƒç¢å¾Œä¾ç„¶é¡˜æ„æ„›ä¸–ç•Œçš„èƒ½åŠ›ã€‚æ‰€æœ‰ä½ ä»¥ç‚ºæ’ä¸éçš„æ™‚åˆ»ï¼Œéƒ½æˆäº†ä½ ç¾åœ¨çš„åŠ›é‡ã€‚ä½ æ¯”è‡ªå·±æƒ³åƒçš„é‚„æ›´å¼·å¤§ã€‚" },
    { title: "Day 22 ğŸ’¡", text: "ä»Šå¹´æœ€å‹‡æ•¢çš„äº‹ï¼Œä¹Ÿè¨±ä¸æ˜¯å‘å‰ï¼Œè€Œæ˜¯ä½ é¡˜æ„èª å¯¦æ‰¿èªè‡ªå·±å®³æ€•ã€‚èª å¯¦æœ¬èº«å°±æ˜¯æˆé•·ã€‚" },
    { title: "Day 23 ğŸ’¡", text: "ä»Šå¤©æœ‰å“ªä»¶å°äº‹è®“ä½ æ„Ÿåˆ°è¢«ç¥ç¦ï¼Ÿèƒ½å¯Ÿè¦ºåˆ°å¾®å°ç¾å¥½ï¼Œæ˜¯ä¸€ç¨®æ·±åˆ»çš„ç”Ÿå‘½åŠ›ã€‚" },
    { title: "Day 24 ğŸ", text: "è–èª•å¿«æ¨‚!!!é¡˜ä»Šå¤œçš„æº«é¦¨èˆ‡ç‡­å…‰ï¼Œç…§äº®ä½ ç”Ÿå‘½ä¸­æ¯ä¸€å€‹ç‰‡åˆ»ã€‚" }
];

// å–å¾— DOM å…ƒç´ 
const doors = document.querySelectorAll('.door');
const modal = document.getElementById('modal');
const closeModal = document.querySelector('.close-btn');
const currentDayDisplay = document.getElementById('current-day-display');

// è®“æœˆæ›†é–‹å§‹é‹ä½œçš„æ ¸å¿ƒå‡½æ•¸
function initializeCalendar() {
    // ã€âœ… ä¿®æ­£ï¼šå¿…é ˆå®šç¾© todayã€‘
    const today = new Date(); 
    
    // 1. å–å¾—ä»Šå¤©çš„æ—¥æœŸ (ä½¿ç”¨ç³»çµ±è‡ªå‹•åˆ¤æ–·)
    const currentMonth = today.getMonth() + 1; // getMonth() å›å‚³ 0-11ï¼Œæ‰€ä»¥è¦ +1
    let currentDay = today.getDate(); // å–å¾—ä»Šå¤©æ˜¯å¹¾è™Ÿ (1-31)

    currentDayDisplay.textContent = currentDay; 

    // 2. åªæœ‰åœ¨ 12 æœˆæ™‚æ‰åŸ·è¡Œè§£é–é‚è¼¯
    if (currentMonth === 12) {
        doors.forEach(door => {
            const doorNumber = parseInt(door.getAttribute('data-day'));

            // åˆ¤æ–·ï¼šé–€æ‰‰æ•¸å­— <= ä»Šå¤©çš„æ—¥æœŸï¼Œå°±è§£é–ï¼
            if (doorNumber <= currentDay) {
                // è¦–è¦ºæ•ˆæœï¼šæ·»åŠ  unlocked class
                door.classList.add('unlocked');

                // äº’å‹•æ€§ï¼šæ·»åŠ é»æ“Šäº‹ä»¶
                door.addEventListener('click', () => {
                    openDoor(doorNumber);
                });
            }
        });
    } else {
        // å¦‚æœä¸æ˜¯ 12 æœˆï¼Œå‰‡é¡¯ç¤ºæç¤º
        currentDayDisplay.textContent = "??";
        alert("ç¾åœ¨ä¸æ˜¯ 12 æœˆï¼Œæœˆæ›†å°šæœªé–‹å•Ÿï¼");
    }
}

// è™•ç†é–‹é–€ä¸¦é¡¯ç¤ºå½ˆçª—çš„å‡½æ•¸
function openDoor(day) {
    // å–å¾—å°æ‡‰çš„å…§å®¹ (è¨˜å¾—é™£åˆ—å¾ 0 é–‹å§‹ï¼Œæ‰€ä»¥ day è¦æ¸› 1)
    const content = dailyContent[day - 1]; 

    // å°‡å…§å®¹æ³¨å…¥åˆ°å½ˆçª—ä¸­
    document.getElementById('modal-title').textContent = content.title;
    document.getElementById('modal-text').textContent = content.text;
    
    // é¡¯ç¤ºå½ˆçª—
    modal.style.display = 'flex';
}

// è™•ç†é—œé–‰å½ˆçª—çš„å‡½æ•¸
function closeWindow() {
    modal.style.display = 'none';
}

// é»æ“Š X é—œé–‰
closeModal.addEventListener('click', closeWindow);

// é»æ“Šå½ˆçª—å¤–åœçš„ç°è‰²å€åŸŸä¹Ÿé—œé–‰
window.addEventListener('click', (event) => {
    if (event.target === modal) {
        closeWindow();
    }
});


// ç¶²é è¼‰å…¥å®Œæˆå¾Œï¼ŒåŸ·è¡Œåˆå§‹åŒ–å‡½æ•¸
window.onload = initializeCalendar;
