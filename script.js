// --- æ¯æ—¥çŸ­å¥å…§å®¹ (æœ€çµ‚ç‰ˆæœ¬) ---
const dailyContent = [
    { title: "Day 1 ğŸ’¡", type: "æ·±åº¦åæ€", text: "ä»Šå¹´ï¼Œå“ªä¸€å€‹ã€Œå¹³å‡¡çš„ç¬é–“ã€åœ¨ä½ å¿ƒä¸­å›å‘³ç„¡çª®ï¼Ÿè«‹è¨˜ä¸‹å®ƒå¸¶ä¾†çš„å¯§éœæ„Ÿã€‚" },
    { title: "Day 2 ğŸ’–", type: "æº«æš–ç™‚ç™’", text: "è¨˜å¾—çµ¦è‡ªå·±ä¸€å€‹æ“æŠ±ï¼Œä½ çš„èº«é«”å’Œå¿ƒéˆä»Šå¤©éƒ½åšå¾—å¾ˆå¥½ï¼Œå€¼å¾—æ‰€æœ‰çš„æº«æŸ”ã€‚" },
    { title: "Day 3 ğŸ˜‚", type: "è©¼è«§å“²ç†", text: "äººç”Ÿå°±åƒ Wi-Fiï¼Œæœ‰æ™‚å€™ä½ å¿…é ˆå…ˆåˆ‡æ–·é€£ç·šï¼Œæ‰èƒ½æ‰¾åˆ°æ›´å¥½çš„è¨Šè™Ÿã€‚" },
    { title: "Day 4 ğŸ’¡", type: "æ·±åº¦åæ€", text: "æ­¤åˆ»ï¼Œä½ æœ€æƒ³å°ä¸€å¹´å‰çš„è‡ªå·±èªªä¸€å¥ä»€éº¼è©±ï¼Ÿæ˜¯é¼“å‹µï¼Œé‚„æ˜¯æ„Ÿè¬ï¼Ÿ" },
    { title: "Day 5 ğŸ’–", type: "æº«æš–ç™‚ç™’", text: "å³ä½¿ç”Ÿæ´»åƒä¸€åœ˜äº‚éº»ï¼Œä¹Ÿè«‹ç›¸ä¿¡ï¼Œä½ æ­£åœ¨ç·¨ç¹”å±¬æ–¼è‡ªå·±çš„ç¨ç‰¹åœ–æ¡ˆã€‚" },
    { title: "Day 6 ğŸ˜‚", type: "è©¼è«§å“²ç†", text: "æ‹–å»¶ç—‡çš„çœŸæ­£æ„ç¾©æ˜¯ï¼šæˆ‘ä¸æ˜¯æ‡¶ï¼Œæˆ‘åªæ˜¯åœ¨ç­‰å¾…å£“åŠ›ç‚ºæˆ‘æä¾›å…è²»çš„è…ä¸Šè…ºç´ ã€‚" },
    { title: "Day 7 ğŸ’¡", type: "æ·±åº¦åæ€", text: "ä½ æœ€å¯¶è²´çš„è³‡æºä¸æ˜¯é‡‘éŒ¢æˆ–æ™‚é–“ï¼Œè€Œæ˜¯ä½ çš„ã€Œæ³¨æ„åŠ›ã€ã€‚ä»Šå¤©ä½ æŠŠå®ƒæŠ•è³‡åœ¨å“ªäº†ï¼Ÿ" },
    { title: "Day 8 ğŸ’–", type: "æº«æš–ç™‚ç™’", text: "ä¸€å€‹å°å°çš„å–„æ„èˆ‰å‹•ï¼Œå¯ä»¥é»äº®æ¯”ä½ æƒ³åƒä¸­æ›´å¤šäººçš„ä¸–ç•Œã€‚" },
    { title: "Day 9 ğŸ˜‚", type: "è©¼è«§å“²ç†", text: "æˆé•·å°±æ˜¯ï¼Œç•¶ä½ ç™¼ç¾ã€Œä¼‘æ¯ã€æ¯”ã€Œç†¬å¤œè¿½åŠ‡ã€æ›´åƒæ˜¯ä¸€ç¨®çå‹µã€‚" },
    { title: "Day 10 ğŸ’¡", type: "æ·±åº¦åæ€", text: "ä»Šå¹´ä½ åšéæœ€å‹‡æ•¢çš„æ±ºå®šæ˜¯ä»€éº¼ï¼Ÿé‚£ä»½åŠ›é‡æœƒä¸€ç›´èˆ‡ä½ åŒåœ¨ã€‚" },
    { title: "Day 11 ğŸ’–", type: "æº«æš–ç™‚ç™’", text: "åœ¨æ„Ÿåˆ°å­¤å–®æ™‚ï¼Œè«‹è¨˜å¾—æœ‰äººæ­£åœ¨ç‚ºä½ çš„å­˜åœ¨æ„Ÿåˆ°æ…¶å¹¸å’Œæ„Ÿæ¿€ã€‚" },
    { title: "Day 12 ğŸ’¡", type: "æ·±åº¦åæ€", text: "æˆ‘å€‘å¸¸å¸¸ç”¨å¿™ç¢Œä¾†å¡«æ»¿ç©ºç™½ï¼Œä½†ä½ æ˜¯å¦å…è¨±è‡ªå·±ï¼Œå¶çˆ¾äº«å—ã€Œç„¡æ‰€äº‹äº‹ã€çš„è‡ªç”±ï¼Ÿ" },
    { title: "Day 13 ğŸ˜‚", type: "è©¼è«§å“²ç†", text: "æˆ‘ä¸æ˜¯æ²’æœ‰ç›®æ¨™ï¼Œæˆ‘çš„ç›®æ¨™æ˜¯ï¼šè®“æˆ‘åœ¨åºŠä¸Šèººè‘—æ™‚ï¼Œæ²’æœ‰ä»»ä½•ç½ªæƒ¡æ„Ÿã€‚" },
    { title: "Day 14 ğŸ", type: "ç‰¹åˆ¥åæ€ (å‹äººç”Ÿæ—¥)", text: "âœ¨ ä½ çš„å­˜åœ¨æœ¬èº«ï¼Œå°±æ˜¯å®‡å®™è´ˆäºˆä¸–é–“æœ€ç¨ç‰¹çš„ç¦®ç‰©ã€‚ä½ æ‰€é€£çµçš„æ¯ä¸€å€‹éˆé­‚ï¼Œéƒ½å› ä½ çš„å…‰èŠ’è€Œæœ‰äº†æ›´æ·±å±¤çš„æ„ç¾©èˆ‡æº«æš–ã€‚" }, 
    { title: "Day 15 ğŸ’–", type: "æº«æš–ç™‚ç™’", text: "é¡˜ä½ ä»Šå¤©èƒ½æ”¾ä¸‹æ‰€æœ‰ä¸å¿…è¦çš„é‡é‡ï¼Œåƒä¸€ç‰‡é›ªèŠ±è¼•ç›ˆåœ°é£„éã€‚" },
    { title: "Day 16 ğŸ’¡", type: "æ·±åº¦åæ€", text: "å¤±æ•—ä¸¦éçµ‚é»ï¼Œè€Œæ˜¯è®“ä½ èªæ¸…è‡ªå·±æœ€åœ¨ä¹ä»€éº¼çš„æŒ‡å—é‡ã€‚" },
    { title: "Day 17 ğŸ˜‚", type: "è©¼è«§å“²ç†", text: "å’–å•¡å­˜åœ¨çš„æ„ç¾©ï¼Œå°±æ˜¯è®“æˆ‘çŸ¥é“ï¼Œæˆ‘åªæ˜¯éœ€è¦ä¸€å€‹é–‹é—œï¼Œè€Œä¸æ˜¯å®Œå…¨çš„æ¸…é†’ã€‚" },
    { title: "Day 18 ğŸ’–", type: "æº«æš–ç™‚ç™’", text: "è®“è‡ªå·±è¢«é‚£äº›æ‡‚å¾—ä½ ã€æ¬£è³ä½ çš„äººåŒ…åœï¼Œä»–å€‘æ˜¯ä½ æœ€çè²´çš„è²¡å¯Œã€‚" },
    { title: "Day 19 ğŸ’¡", type: "æ·±åº¦åæ€", text: "å¦‚æœå¯ä»¥ï¼Œä½ æƒ³ä¿ç•™ä»Šå¹´çš„ä¸€å€‹ã€Œç¿’æ…£ã€å¸¶åˆ°æ˜å¹´ã€‚å®ƒæ˜¯ä»€éº¼ï¼Ÿç‚ºä»€éº¼ï¼Ÿ" },
    { title: "Day 20 ğŸ˜‚", type: "è©¼è«§å“²ç†", text: "æˆ‘ä¸æ˜¯åœ¨ç™¼å‘†ï¼Œæˆ‘çš„å¤§è…¦åªæ˜¯åœ¨é€²è¡Œè¤‡é›œçš„èƒŒæ™¯é‹ç®—ï¼Œè©¦åœ–ç†è§£äººç”Ÿçš„ä½¿ç”¨èªªæ˜æ›¸ã€‚" }, 
    { title: "Day 21 ğŸ’–", type: "æº«æš–ç™‚ç™’", text: "æ‰€æœ‰çš„æ™æ‰æœ€çµ‚éƒ½æœƒåŒ–ç‚ºåŠ›é‡ï¼Œä½ æ¯”ä½ æƒ³åƒçš„æ›´å …éŸŒã€æ›´å¼·å¤§ã€‚" },
    { title: "Day 22 ğŸ’¡", type: "æ·±åº¦åæ€", text: "æˆ‘å€‘èŠ±å¤ªå¤šæ™‚é–“åœ¨ç­‰å¾…å®Œç¾çš„æ™‚æ©Ÿï¼Œå»å¿˜äº†ï¼Œç¾åœ¨å°±æ˜¯æœ€å¥½çš„æ™‚æ©Ÿã€‚" },
    { title: "Day 23 ğŸ˜‚", type: "è©¼è«§å“²ç†", text: "è–èª•ç¯€çš„é­”åŠ›æ˜¯ï¼Œå®ƒè®“æˆ‘å¯ä»¥åæ­£è¨€é †åœ°åƒæ‰æ‰€æœ‰çš„ç³–æœï¼Œç„¶å¾Œèªªé€™æ˜¯ä¸€ç¨®ã€Œç¯€æ—¥ç²¾ç¥ã€ã€‚" },
    { title: "Day 24 ğŸ", type: "æº«æš–ç™‚ç™’ (è–èª•å¤œ)", text: "é¡˜ä»Šå¤œçš„æº«é¦¨èˆ‡ç‡­å…‰ï¼Œç…§äº®ä½ ç”Ÿå‘½ä¸­æ¯ä¸€å€‹å€¼å¾—æ…¶ç¥çš„æ™‚åˆ»ã€‚" }
];

// å–å¾— DOM å…ƒç´ 
const doors = document.querySelectorAll('.door');
const modal = document.getElementById('modal');
const closeModal = document.querySelector('.close-btn');
const currentDayDisplay = document.getElementById('current-day-display');

// è®“æœˆæ›†é–‹å§‹é‹ä½œçš„æ ¸å¿ƒå‡½æ•¸
function initializeCalendar() {
    // 1. å–å¾—ä»Šå¤©çš„æ—¥æœŸ
    const today = new Date();
    const currentMonth = today.getMonth() + 1; // getMonth() å›å‚³ 0-11ï¼Œæ‰€ä»¥è¦ +1
    let currentDay = today.getDate(); // å–å¾—ä»Šå¤©æ˜¯å¹¾è™Ÿ (1-31)

    // å› ç‚ºä»Šå¤©æ˜¯ 12/1ï¼Œé€™è£¡ currentDay æœƒæ˜¯ 1ã€‚
    currentDayDisplay.textContent = currentDay; 

    // 2. åªæœ‰åœ¨ 12 æœˆæ™‚æ‰åŸ·è¡Œè§£é–é‚è¼¯
    if (currentMonth === 12) {
        doors.forEach(door => {
            const doorNumber = parseInt(door.getAttribute('data-day'));

            // åˆ¤æ–·ï¼šé–€æ‰‰æ•¸å­— <= ä»Šå¤©çš„æ—¥æœŸï¼Œå°±è§£é–ï¼
            if (doorNumber <= currentDay) {
                // è¦–è¦ºæ•ˆæœï¼šæ·»åŠ  unlocked class
                door.classList.add('unlocked');

                // äº’å‹•æ€§ï¼šæ·»åŠ é»æ“Šäº‹ä»¶
                door.addEventListener('click', () => {
                    openDoor(doorNumber);
                });
            }
        });
    } else {
        // å¦‚æœä¸æ˜¯ 12 æœˆï¼Œå‰‡é¡¯ç¤ºæç¤º
        currentDayDisplay.textContent = "??";
        alert("ç¾åœ¨ä¸æ˜¯ 12 æœˆï¼Œæœˆæ›†å°šæœªé–‹å•Ÿï¼");
    }
}

// è™•ç†é–‹é–€ä¸¦é¡¯ç¤ºå½ˆçª—çš„å‡½æ•¸
function openDoor(day) {
    // å–å¾—å°æ‡‰çš„å…§å®¹ (è¨˜å¾—é™£åˆ—å¾ 0 é–‹å§‹ï¼Œæ‰€ä»¥ day è¦æ¸› 1)
    const content = dailyContent[day - 1]; 

    // å°‡å…§å®¹æ³¨å…¥åˆ°å½ˆçª—ä¸­
    document.getElementById('modal-title').textContent = content.title;
    document.getElementById('modal-text').textContent = content.text;
    document.getElementById('quote-type').textContent = `åˆ†é¡ï¼š${content.type}`;
    
    // é¡¯ç¤ºå½ˆçª—
    modal.style.display = 'flex';
}

// è™•ç†é—œé–‰å½ˆçª—çš„å‡½æ•¸
function closeWindow() {
    modal.style.display = 'none';
}

// é»æ“Š X é—œé–‰
closeModal.addEventListener('click', closeWindow);

// é»æ“Šå½ˆçª—å¤–åœçš„ç°è‰²å€åŸŸä¹Ÿé—œé–‰
window.addEventListener('click', (event) => {
    if (event.target === modal) {
        closeWindow();
    }
});


// ç¶²é è¼‰å…¥å®Œæˆå¾Œï¼ŒåŸ·è¡Œåˆå§‹åŒ–å‡½æ•¸
window.onload = initializeCalendar;
